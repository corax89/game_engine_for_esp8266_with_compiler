//16x16
char gr[] = {0x55,0x99,0xdd,0x9d,0xd9,0xd5,0x55,0xd9,0x5d,0xdd,0xdd,0xdd,0xdd,0xdd,0xdd,0x55,0x55,0xdd,0xd5,0x5d,0x9d,0xdd,0xd9,0xd5,0x75,0xdd,0xdd,0x5d,0x55,0x59,0xd5,0xdd,0xdd,0xd5,0xd9,0xd5,0xdd,0xdd,0xdd,0xdd,0xdd,0x9d,0x5d,0xdd,0x5d,0xd7,0x5d,0xd9,0xdd,0x59,0xdd,0xdd,0xd9,0xdd,0x5d,0xdd,0x95,0x9d,0x95,0x57,0xdd,0x5d,0x5d,0x97,0xdd,0xdd,0xd5,0xdd,0xdd,0xdd,0x95,0xd5,0xdd,0x9d,0xdd,0x5d,0xd9,0x9d,0x5d,0x9d,0xd5,0xdd,0x9d,0x5d,0xdd,0xdd,0xd5,0x5d,0x95,0x95,0xd9,0xd5,0x55,0x7d,0xdd,0x55,0x55,0xd5,0x75,0x5d,0xdd,0xdd,0xd9,0xd9,0x55,0xdd,0xd9,0xdd,0x5d,0xdd,0xd9,0x59,0x95,0x9d,0xd7,0xd5,0xd9,0x7d,0xdd,0x55,0xd9,0x55,0x5d,0x9d,0xdd,0xd9,0xd9,0x55};
char wh[] = {0x59,0x59,0xd5,0x5d,0x5d,0xdd,0x59,0x57,0xdd,0x55,0x9d,0xd7,0xdd,0x97,0x5d,0x5d,0x5d,0x97,0x85,0x95,0x95,0xd8,0x99,0x55,0x88,0xd8,0x88,0x88,0x88,0xd8,0x88,0x88,0xc8,0xf8,0x88,0x8c,0xc8,0x88,0x8c,0xcc,0x88,0x88,0x88,0x88,0xcc,0x88,0xf8,0x88,0x88,0xcc,0xc8,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x8c,0x8c,0xcc,0x88,0x88,0x88,0x88,0xf8,0x88,0x88,0x88,0x88,0xcc,0x88,0x88,0x88,0x88,0x88,0x8f,0x8c,0x88,0x88,0xcc,0x8c,0xc8,0x88,0x88,0x88,0x88,0xf8,0x88,0x88,0x8f,0x8c,0x8f,0x88,0x88,0x88,0x88,0x88,0xd8,0x88,0x88,0x88,0x85,0xd9,0x98,0x5d,0x55,0xdd,0x8d,0x57,0xdd,0xdd,0x75,0xd9,0xd9,0x59,0x5d,0x59,0xd5,0x59,0xd5,0x55,0xd5,0xd5,0x59,0x5d};
char ww[] = {0x59,0x58,0x8c,0x88,0x88,0x88,0x89,0x57,0xdd,0x58,0x88,0xc8,0x8f,0x8c,0x8d,0x5d,0x5d,0x98,0x88,0xc8,0x88,0x8c,0x59,0x55,0xd7,0xd5,0x88,0x88,0x88,0x8c,0x8d,0xdd,0xdd,0xd8,0x8f,0x8c,0x88,0x88,0x85,0x9d,0x57,0xd8,0x88,0xf8,0x8c,0x88,0x8d,0x5d,0xd5,0xd5,0xc8,0x88,0x88,0x8f,0x88,0xd5,0xdd,0xd8,0x88,0x88,0x8c,0x8c,0x88,0xdd,0x59,0xd8,0x88,0xf8,0x88,0x88,0xf8,0x7d,0xd9,0xd8,0x58,0x88,0x88,0x88,0xcf,0x5d,0xdd,0xd8,0xcc,0x8c,0x88,0x88,0xc8,0xd9,0x95,0x78,0x8c,0x88,0x8c,0x8c,0x8f,0xdd,0xdd,0xd5,0x8c,0x8f,0x8c,0x88,0x85,0x9d,0xd9,0xd8,0x9c,0x88,0x8f,0x88,0xc5,0xd7,0xd5,0xd8,0x78,0x88,0xc8,0x88,0xc5,0x59,0xd5,0x58,0x88,0x88,0xc8,0x88,0x85,0x5d};
char ld[] = {0x59,0x59,0xd5,0x5d,0x5d,0xdd,0x59,0x57,0xdd,0x55,0x9d,0xd7,0xdd,0x9d,0x5d,0x5d,0x5d,0x97,0x85,0x95,0x95,0xdd,0xd9,0x55,0x88,0xd8,0x88,0x88,0x88,0xd8,0xdd,0xdd,0xc8,0xf8,0x88,0x8c,0xc8,0x88,0xd5,0x9d,0x88,0x88,0x88,0xf8,0xcc,0x88,0xfd,0xdd,0x88,0xcc,0xc8,0x88,0x88,0x88,0x88,0xd5,0x88,0x88,0x88,0x88,0x8c,0x8c,0x88,0xdd,0x88,0x88,0x88,0xf8,0x88,0x88,0xf8,0x7d,0xcc,0x8f,0x88,0x88,0x88,0x8c,0xcf,0x5d,0x88,0x88,0xcc,0x8c,0x88,0x88,0xc8,0xd9,0x88,0xf8,0x88,0x88,0x8c,0x8c,0x8f,0xdd,0x88,0x88,0x88,0x8f,0x8c,0x88,0x85,0x9d,0x85,0xd9,0x98,0x88,0x8f,0x88,0xc8,0xd7,0xdd,0xdd,0x78,0x88,0xc8,0x8c,0xc8,0x59,0xd5,0x59,0x88,0x88,0xc8,0x88,0x88,0x5d};
char ul[] = {0x59,0x58,0x8c,0x88,0x88,0x88,0x89,0x57,0xdd,0x58,0x88,0xc8,0x8f,0x8c,0x8d,0x5d,0x5d,0x88,0x88,0xc8,0x88,0x8c,0x59,0x55,0xd7,0xd8,0xc8,0x88,0x88,0x8c,0x8d,0xdd,0x88,0x8c,0x8f,0x8c,0x88,0x88,0x85,0x9d,0x88,0x88,0x88,0xf8,0x8c,0x88,0x85,0x5d,0x8c,0xcc,0x88,0x8c,0x88,0x88,0x85,0xd5,0x88,0x88,0x8c,0xc8,0x8c,0x88,0xd5,0xdd,0x58,0x88,0xc8,0xf8,0x8c,0x85,0x58,0x7d,0x88,0x88,0x88,0x88,0xcd,0x58,0xd5,0x5d,0x88,0x88,0x8c,0x8c,0x85,0x85,0xdd,0xd9,0xc8,0x78,0x88,0x8d,0x88,0x5d,0xd5,0xdd,0x88,0x88,0x8c,0x58,0x95,0xdd,0x95,0xdd,0x85,0x55,0x95,0xdd,0x5d,0xdc,0xd5,0xd7,0xd5,0xd5,0xd5,0x7d,0xd5,0x75,0x59,0x59,0xd5,0x55,0x5d,0x55,0x85,0xdd,0xd5,0x5d};
char rd[] = {0x59,0x55,0x55,0x55,0x55,0xd5,0x59,0x57,0xdd,0x5d,0x75,0x75,0xd5,0x57,0x5d,0x5d,0x5d,0x55,0x55,0x55,0x58,0x8c,0x59,0x55,0xdd,0xdd,0x55,0x88,0x88,0x88,0x88,0x88,0x55,0x55,0x58,0x8c,0x88,0x8c,0xcc,0xc8,0x55,0x75,0x88,0xf8,0x8c,0x88,0x88,0xf8,0x55,0x55,0x88,0x8c,0x88,0x88,0x8c,0xc8,0x5d,0x58,0x8c,0xc8,0x88,0xf8,0x88,0x88,0x7d,0xd8,0xc8,0xf8,0x8c,0x88,0xcc,0xc8,0x5d,0xd8,0x88,0x88,0xcd,0x88,0x88,0xf8,0x55,0xd8,0x88,0x8c,0x88,0x8c,0xc8,0x88,0xc7,0x5d,0xc8,0x88,0x88,0xc8,0x88,0x88,0x55,0x58,0xcf,0x88,0xc8,0x88,0x85,0xdd,0x55,0x58,0x88,0xc8,0x88,0x8c,0xd5,0xd7,0xd5,0xdd,0x88,0xc8,0xc8,0xf5,0x59,0x59,0xd5,0x58,0x85,0x88,0x88,0x8d,0xd5,0x5d};
char ur[] = {0x59,0x58,0x88,0x8f,0xc8,0x88,0x89,0x57,0xdd,0x58,0x8c,0x88,0xc8,0x87,0x8d,0x5d,0x5d,0x58,0x8f,0xc8,0x88,0xc8,0x59,0x55,0xdd,0xdd,0x88,0xc8,0x88,0xc8,0x88,0x78,0x55,0x58,0x88,0x88,0xc8,0x8c,0xcc,0xc8,0x55,0x78,0xf8,0xc8,0x8c,0x88,0x88,0xf8,0x55,0x88,0x88,0x8c,0x88,0x58,0x8c,0xc8,0x5d,0x58,0x8c,0xc8,0x55,0xf8,0x88,0x88,0x7d,0x88,0x58,0xf5,0x5c,0x88,0xcc,0xc8,0x5d,0x58,0x55,0x58,0xcd,0xc8,0x88,0xf8,0x55,0xd8,0x88,0xd5,0x88,0x8c,0xc8,0x88,0xc7,0x5d,0xc8,0x85,0x58,0xc8,0x88,0x88,0x55,0x55,0x55,0x88,0x85,0x55,0x55,0xdd,0x55,0xd7,0x58,0x55,0x85,0x5c,0xd5,0xd7,0xd5,0xd5,0x55,0xdd,0xdd,0x75,0x59,0x59,0xd5,0x5d,0xd5,0x55,0x55,0x55,0xd5,0x5d};

char t11[] = {0xd5,0xdd,0x9d,0xd9,0xd5,0xdd,0xd5,0x5d,0xdd,0x11,0x11,0x11,0x11,0x11,0x11,0x5d,0xdd,0x1c,0xcc,0xcc,0xcc,0xcc,0xc1,0xdd,0x59,0x1f,0xff,0xff,0xff,0xff,0xf1,0xdd,0xdd,0x1f,0xff,0xf6,0x6f,0xff,0xf1,0xdd,0xdd,0x1f,0xff,0x6e,0xe6,0xff,0xf1,0xdd,0xdd,0x1f,0xff,0x6e,0xe6,0xff,0xf1,0xdd,0xd5,0x1f,0xff,0xf6,0x6f,0xff,0xf1,0xdd,0xd9,0x1f,0xff,0xff,0xff,0xff,0xf1,0xdd,0x9d,0x11,0x11,0x11,0x11,0x11,0x11,0x9d,0xd9,0xff,0xff,0xff,0xff,0xff,0xff,0x5d,0x95,0xcc,0xcf,0xff,0xff,0xff,0xcc,0xdd,0xd9,0xff,0x9f,0x9f,0x9f,0x9f,0xff,0xdd,0x9d,0xcc,0xff,0xff,0xff,0xfc,0xcc,0x5d,0x59,0xff,0xff,0xff,0xff,0xff,0xff,0xd5,0xdd,0xdd,0xd5,0xdd,0xdd,0xdd,0xdd,0xdd};
char t12[] = {0xd5,0xdd,0x9d,0xd9,0xd5,0xdd,0xd5,0x5d,0xdd,0x11,0x11,0x11,0x11,0x11,0x11,0x5d,0xdd,0x1c,0xcc,0xcc,0xcc,0xcc,0xc1,0xdd,0x59,0x1f,0xff,0x66,0x66,0xff,0xf1,0xdd,0xdd,0x1f,0xf6,0xee,0xee,0x6f,0xf1,0xdd,0xdd,0x1f,0x6e,0xee,0x3e,0xe6,0xf1,0xdd,0xdd,0x1f,0x6e,0xee,0xe3,0xe6,0xf1,0xdd,0xd5,0x1f,0xf6,0xee,0xee,0x6f,0xf1,0xdd,0xd9,0x1f,0xff,0x66,0x66,0xfc,0xf1,0xdd,0x9d,0x11,0x11,0x11,0x11,0x11,0x11,0x9d,0xd9,0xff,0xff,0xff,0xff,0xff,0xff,0x5d,0x95,0xcc,0xcf,0xff,0xff,0xff,0xcc,0xdd,0xd9,0xff,0x9f,0x9f,0x9f,0x9f,0xff,0xdd,0x9d,0xcc,0xff,0xff,0xff,0xfc,0xcc,0x5d,0x59,0xff,0xff,0xff,0xff,0xff,0xff,0xd5,0xdd,0xdd,0xd5,0xdd,0xdd,0xdd,0xdd,0xdd};
char t21[] = {0x59,0x55,0x5d,0xdd,0x55,0x55,0xdd,0x57,0xd5,0x58,0x88,0x88,0x88,0x88,0x85,0x5d,0x5d,0x58,0xaa,0xaa,0xaa,0xaa,0x89,0x55,0xdd,0x58,0x11,0x11,0x11,0x11,0x8d,0xdd,0x55,0xd8,0x12,0x12,0x21,0x21,0x85,0xdd,0x55,0xd8,0x11,0x21,0x72,0x11,0x8d,0x55,0x55,0xd8,0x11,0x21,0x12,0x11,0x8d,0x5d,0x5d,0xd8,0x12,0x12,0x21,0x21,0x85,0x9d,0x7d,0xd8,0x11,0x71,0x11,0x11,0x8d,0x5d,0x5d,0x58,0x88,0x88,0x88,0x88,0x8d,0x5d,0x55,0xdc,0xcc,0xcc,0xcc,0xcc,0xcd,0x5d,0xc7,0x5c,0xcf,0xcc,0xcc,0xcf,0xc5,0xdd,0x55,0x9c,0xcc,0xcb,0xbc,0xcc,0xc5,0xdd,0x55,0xdc,0xfc,0xcb,0xbc,0xfc,0xc5,0xd7,0xd5,0xdc,0xcc,0xcb,0xbc,0xcc,0xf9,0x59,0xd5,0x5d,0xd5,0x55,0x55,0x55,0xd5,0x5d};
char t22[] = {0x59,0x55,0x5d,0xdd,0x55,0x55,0xdd,0x57,0xd5,0x58,0x88,0x88,0x88,0x88,0x85,0x5d,0x5d,0x58,0xaa,0xa2,0x2a,0xaa,0x89,0x55,0xdd,0x58,0x71,0x21,0x12,0x11,0x8d,0xdd,0x55,0xd8,0x12,0x11,0xa1,0x21,0x85,0xdd,0x55,0xd8,0x21,0x12,0x1a,0x12,0x8d,0x55,0x55,0xd8,0x21,0xa1,0x21,0x12,0x8d,0x5d,0x5d,0xd8,0x12,0x1a,0x11,0x21,0x85,0x9d,0x7d,0xd8,0x11,0x21,0x12,0x17,0x8d,0x5d,0x5d,0x58,0x88,0x88,0x88,0x88,0x8d,0x5d,0x55,0xdc,0xcc,0xcc,0xcc,0xcc,0xcd,0x5d,0xc7,0x5c,0xcf,0xcc,0xcc,0xcf,0xc5,0xdd,0x55,0x9c,0xcc,0xcb,0xbc,0xcc,0xc5,0xdd,0x55,0xdc,0xfc,0xcb,0xbc,0xfc,0xc5,0xd7,0xd5,0xdc,0xcc,0xcb,0xbc,0xcc,0xf9,0x59,0xd5,0x5d,0xd5,0x55,0x55,0x55,0xd5,0x5d};
char t31[] = {0xd5,0x5d,0xd5,0x51,0x15,0x55,0xd5,0x5d,0x59,0x55,0x51,0x16,0x61,0x15,0xdd,0x57,0xd5,0x55,0x16,0x6a,0xa6,0x61,0x55,0x5d,0x5d,0x51,0x6a,0xaa,0xaa,0xa6,0x19,0x55,0xdd,0x51,0xaa,0xad,0xda,0xaa,0x1d,0xdd,0x55,0x16,0xaa,0xd5,0x7d,0xaa,0x61,0xdd,0x55,0x1a,0xaa,0xd5,0x5d,0xaa,0xa1,0x55,0x55,0xc1,0xaa,0xad,0xda,0xaa,0x1f,0x5d,0x5d,0xc1,0xaa,0xaa,0xaa,0xaa,0x1f,0x9d,0x7d,0xcf,0x1a,0xaa,0xaa,0xa1,0xff,0x5d,0x5d,0xcc,0xf1,0x1a,0xa1,0x1f,0xff,0x5d,0x55,0xdc,0xcf,0xc1,0x1f,0xff,0xfd,0x5d,0xc7,0x5c,0xfc,0xfc,0xff,0xff,0xf5,0xdd,0x55,0x95,0xcf,0xcf,0xff,0xff,0x55,0xdd,0x55,0xd5,0x5c,0xfc,0xff,0xf5,0x55,0xd7,0xd5,0xd5,0x55,0x5f,0xf5,0x55,0x59,0x59};
char t32[] = {0xd5,0x5d,0xd5,0x51,0x15,0x55,0xd5,0x5d,0x59,0x55,0x51,0x16,0x61,0x15,0xdd,0x57,0xd5,0x55,0x16,0x6a,0xa6,0x61,0x55,0x5d,0x5d,0x51,0x6a,0xdd,0xdd,0xa6,0x19,0x55,0xdd,0x51,0xad,0x55,0x55,0xda,0x1d,0xdd,0x55,0x16,0xad,0x57,0x75,0xda,0x61,0xdd,0x55,0x1a,0xad,0x57,0x75,0xda,0xa1,0x55,0x55,0xc1,0xad,0x55,0x55,0xda,0x1f,0x5d,0x5d,0xc1,0xaa,0xdd,0xdd,0xaa,0x1f,0x9d,0x7b,0xcf,0x1a,0xaa,0xaa,0xa1,0xff,0x5d,0x5b,0xcc,0xf1,0x1a,0xa1,0x1f,0xff,0x5d,0x55,0xbc,0xcf,0xc1,0x1f,0xff,0xfd,0x5d,0xc7,0xbc,0xfc,0xfc,0xff,0xff,0xf5,0xdd,0x55,0x9b,0xcf,0xcf,0xff,0xff,0x55,0xdd,0x55,0xd5,0xbc,0xfc,0xff,0xf5,0x55,0xd7,0xd5,0xd5,0x55,0x5f,0xf5,0x55,0x59,0x59};
char colors[] = {3, 6, 2, 10, 5, 9};

char cursor[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x66,0x66,0x66,0x66,0x66,0x66,0x0,0x6,0xee,0xee,0xee,0xee,0xee,0xee,0x60,0x6e,0x0,0x0,0x0,0x0,0x0,0x0,0xe6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0xe6,0x0,0x0,0x0,0x0,0x0,0x0,0x6e,0xe,0x66,0x66,0x66,0x66,0x66,0x66,0xe0,0x0,0xee,0xee,0xee,0xee,0xee,0xee,0x0};
char cursorup[] = {0x0,0xaa,0xaa,0xaa,0xaa,0xaa,0xaa,0x0,0xa,0x77,0x71,0x11,0x11,0x17,0x77,0xa0,0xa7,0x0,0x11,0x11,0x11,0x11,0x0,0x7a,0xa0,0x1,0x19,0x91,0x99,0x91,0x10,0xa,0xa0,0x1,0x19,0x11,0x91,0x91,0x10,0xa,0xa0,0x1,0x19,0x91,0x91,0x91,0x10,0xa,0xa0,0x1,0x11,0x91,0x91,0x91,0x10,0xa,0xa0,0x1,0x19,0x91,0x99,0x91,0x10,0xa,0xa0,0x0,0x11,0x11,0x11,0x11,0x0,0xa,0xa0,0x0,0x1,0x11,0x11,0x10,0x0,0xa,0xa0,0x0,0x0,0xa,0xa0,0x0,0x0,0xa,0xa0,0x0,0x0,0xaa,0xaa,0x0,0x0,0xa,0xa0,0x0,0xa,0xaa,0xaa,0xa0,0x0,0xa,0x7a,0x0,0x7,0x7a,0xa7,0x70,0x0,0xa7,0x7,0xaa,0xaa,0xaa,0xaa,0xaa,0xaa,0x70,0x0,0x77,0x77,0x77,0x77,0x77,0x77,0x0};
char cursoroff[] = {0x0,0xbb,0xbb,0xbb,0xbb,0xbb,0xbb,0x0,0xb,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0xb0,0xbc,0x0,0x0,0x0,0x0,0x0,0x0,0xcb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xb0,0x0,0x0,0x0,0x0,0x0,0x0,0xb,0xcb,0x0,0x0,0x0,0x0,0x0,0x0,0xbc,0xc,0xbb,0xbb,0xbb,0xbb,0xbb,0xbb,0xc0,0x0,0xcc,0xcc,0xcc,0xcc,0xcc,0xcc,0x0};

//16x16 rle
char gameover[] = {0x10,0x44,0x5,0xcc,0x82,0xbc,0x2,0xcc,0x3,0x88,0x84,0xb8,0x8b,0xb8,0x2,0x88,0x2,0xaa,0x85,0xa6,0xbb,0xab,0xba,0x4,0xaa,0x82,0x66,0x2,0xbb,0x82,0xba,0x2,0xaa,0x2,0x22,0x84,0x66,0x4b,0xbb,0x5,0x22,0x85,0x66,0x2b,0x9b,0xb2,0x4,0x22,0x85,0x26,0xbb,0x9b,0xb2,0x2,0x22,0x2,0x55,0x85,0x66,0xbb,0x9b,0xb5,0x4,0x55,0x82,0x66,0x2,0xbb,0x82,0xb5,0x4,0x55,0x82,0x66,0x2,0xbb,0x82,0xb5,0x2,0x55,0x10,0xdd,0x8,0x99,0x8,0xbb};

//7x7
char menu11[] = {0x0,0xc,0x0,0x0,0x0,0xcf,0xc0,0x0,0xf,0xfc,0xfc,0x0,0xff,0xff,0xcf,0xc0,0xf,0xff,0xfc,0x0,0x0,0xff,0xf0,0x0,0x0,0xf,0x0,0x0};
char menu12[] = {0x0,0xe,0x0,0x0,0x0,0xe3,0xe0,0x0,0x3,0x3e,0x3e,0x0,0x33,0x33,0xe3,0xe0,0x3,0x33,0x3e,0x0,0x0,0x33,0x30,0x0,0x0,0x3,0x0,0x0};
char menu21[] = {0x0,0xcc,0xc0,0x0,0xc,0x0,0xc,0x0,0xc0,0xc0,0xc0,0xc0,0xc0,0xf,0x0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc,0x0,0xc,0x0,0x0,0xcc,0xc0,0x0};
char menu22[] = {0x0,0x22,0x20,0x0,0x2,0x0,0x2,0x0,0x20,0x20,0x20,0x20,0x20,0x7,0x0,0x20,0x20,0x20,0x20,0x20,0x2,0x0,0x2,0x0,0x0,0x22,0x20,0x0};
char menu31[] = {0xc,0xcc,0xcc,0x0,0xcc,0xcc,0xcc,0xc0,0xcc,0xff,0xfc,0xc0,0xcc,0xff,0xfc,0xc0,0xcc,0xff,0xfc,0xc0,0xcc,0xcc,0xcc,0xc0,0xc,0xcc,0xcc,0x0};
char menu32[] = {0x5,0x55,0x55,0x0,0x55,0x55,0x55,0x50,0x55,0x77,0x75,0x50,0x55,0x77,0x75,0x50,0x55,0x77,0x75,0x50,0x55,0x55,0x55,0x50,0x5,0x55,0x55,0x0};
int menuoff[] = {menu11, menu21, menu31};
int menuon[]  = {menu12, menu22, menu32};
//7x4
char mcursor[] = {0x7a,0xaa,0xaa,0x20,0x7,0xaa,0xa2,0x0,0x0,0x7a,0x20,0x0,0x0,0x2,0x0,0x0};
char scursor[] = {0xbb,0xbb,0xbb,0xb0,0xb,0xbb,0xbb,0x0,0x0,0xbb,0xb0,0x0,0x0,0xb,0x0,0x0};

//10x12
char m11[] = {0x0,0x0,0x6,0x0,0x0,0x0,0x0,0x66,0x90,0x0,0x0,0x6,0x69,0x99,0x0,0x0,0x6,0x96,0x92,0x90,0x0,0x69,0x62,0x99,0x90,0x0,0x66,0x99,0x99,0x0,0x0,0x69,0x69,0x99,0x0,0x0,0x96,0x99,0x99,0x90,0x6,0x69,0x69,0x99,0x90,0x66,0x96,0x99,0x99,0x90,0x6,0x69,0x69,0x99,0x0,0x0,0x66,0x99,0x90,0x0};
char m12[] = {0x0,0x0,0x60,0x0,0x0,0x0,0x6,0x66,0x90,0x0,0x0,0x66,0x69,0x29,0x0,0x6,0x66,0x26,0x99,0x0,0x66,0x69,0x69,0x99,0x0,0x6,0x96,0x99,0x90,0x0,0x6,0x69,0x69,0x90,0x0,0x6,0x96,0x99,0x99,0x0,0x0,0x69,0x69,0x99,0x0,0x0,0x6,0x96,0x99,0x0,0x0,0x0,0x69,0x99,0x90,0x0,0x6,0x96,0x99,0x90};
char m21[] = {0x0,0x0,0x66,0xe0,0x0,0x0,0x6,0xe6,0xee,0x0,0x0,0x6e,0x6e,0x2e,0xe0,0x6,0xe2,0xee,0x2e,0xe,0x6,0x62,0xee,0xe0,0xe1,0xe,0xee,0xee,0xe,0x1,0x0,0xee,0xe0,0xe0,0x10,0x0,0xe,0xe,0x1,0x0,0x0,0x0,0xe1,0x10,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xf,0xf,0xf,0x0,0x0,0xf0,0xf0,0xf0,0xf0};
char m22[] = {0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x66,0xe0,0x0,0x0,0x6,0xe6,0xee,0x0,0x0,0x6e,0x6e,0x2e,0xe0,0x6,0xe2,0xee,0x2e,0xe,0x6,0x62,0xee,0xe0,0xe1,0xe,0xee,0xee,0xe,0x1,0x0,0xee,0xe0,0xe0,0x10,0x0,0xe,0xe,0x1,0x0,0x0,0x0,0xe1,0x10,0x0,0x0,0xc0,0xc0,0xc0,0xc0,0x0,0xf,0xf,0xf,0x0};
char m31[] = {0x0,0x0,0x11,0x10,0x0,0x0,0x1,0x21,0x21,0x0,0x0,0x1,0x11,0x11,0x0,0x0,0x0,0x11,0x10,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x1,0x11,0x11,0x10,0x0,0x10,0x1,0x0,0x1,0x1,0x0,0x11,0x10,0x1,0x1,0x0,0x1,0x0,0x1,0x0,0x0,0x11,0x10,0x0,0x0,0x1,0x0,0x1,0x0,0x0,0x10,0x0,0x1,0x0};
char m32[] = {0x0,0x0,0x11,0x10,0x0,0x0,0x1,0x11,0x11,0x0,0x0,0x1,0x21,0x21,0x0,0x0,0x0,0x11,0x10,0x0,0x0,0x0,0x1,0x0,0x0,0x0,0x11,0x11,0x11,0x0,0x1,0x0,0x1,0x0,0x10,0x1,0x0,0x11,0x10,0x1,0x1,0x0,0x1,0x0,0x1,0x0,0x0,0x11,0x10,0x0,0x0,0x1,0x0,0x1,0x0,0x0,0x1,0x0,0x0,0x10};
int monster1[] = {m11, m12};
int monster2[] = {m21, m22};
int monster3[] = {m31, m32};

int gold,lives,monsterlives;
char pos, mpos, i, cadr, x, y, key, prevkey;
//point
int point[] = {100, 50, 22, 82, 100};
char nextstep[13];
char monstercount, maxmonster, addmonster;

int field[] = {
	gr,gr,gr,gr,gr,gr,gr,gr,
	wh,wh,wh,wh,wh,wh,ld,gr,
	gr,gr,gr,gr,gr,gr,ww,gr,
	gr,rd,wh,wh,wh,wh,ul,gr,
	gr,ww,gr,gr,gr,gr,gr,gr,
	gr,ur,wh,wh,wh,wh,ld,gr,
	gr,gr,gr,gr,gr,gr,ww,gr
}

char istower(int n){
	if(field[n] == t11)
		return 1;	
	if(field[n] == t12)
		return 2;		
	if(field[n] == t21)
		return 3;	
	if(field[n] == t22)
		return 4;
	if(field[n] == t31)
		return 5;
	if(field[n] == t32)
		return 6;
	return false;
}

void newwave(){
	monsterlives += 1;
	monstercount = 0;
	maxmonster = 6;
	addmonster = 6;
	for(i = 1; i <= maxmonster; i++){
		getsprite(i, m11);
		spritesetvalue(i, S_WIDTH, 10);
		spritesetvalue(i, S_HEIGHT, 12);
	} 
	gold += gold / 10;
}

void init(){
	clearscreen(0);
	setimagesize(1);
	monsterlives = 0;
	gold = 46;
	lives = 20;
	x = 0;
	y = 0;
	putimage(mcursor, 5, 113, 7, 4);
	getsprite(0, cursor);
	spritesetvalue(0, S_WIDTH, 16);
	spritesetvalue(0, S_HEIGHT, 16);
	putsprite(0, 0, 0);
	loadtile(field, 16, 16, 8, 7);
	drawtile(0,0);
	for(i = 0; i < 56; i++) //clear tower
		if(istower(i))
			field[i] = gr;
	settimer(1,3000);
	newwave();
}

void loose(){
	setimagesize(8);
	putimagerle(gameover, 0, 0, 16, 16);
	for(i = 0; i < 16; i++)
		spritesetvalue(i, S_LIVES,0);
	while(getkey() == 0){}
	init();
}

void nextcadr(){
	if(gettimer(0) == 0){
		cadr = 1 - cadr;
		if(monsterlives % 3 == 0)
			for(i = 1; i <= maxmonster; i++){
				getsprite(i, monster1[cadr]);
			}
		else if(monsterlives % 3 == 1)
			for(i = 1; i <= maxmonster; i++){
				getsprite(i, monster2[cadr]);
			}
		else if(monsterlives % 3 == 2)
			for(i = 1; i <= maxmonster; i++){
				getsprite(i, monster3[cadr]);
			}
		drawtile(0,0);
		settimer(0,300);
	}
}

char getnearest(int x, int y, int d){
	char j;
	for(j = 1; j <= maxmonster; j++)
		if(spritegetvalue(j, S_LIVES) > 0)
			if(distance(x, y, spritegetvalue(j, S_X), spritegetvalue(j, S_Y)) < d){
				return j;
			}
	return 0;
}

void step(){
	char tower,col,d,s;
	int l;
	if(gettimer(1) == 0){
		if(addmonster > 0){
			spritesetvalue(addmonster, S_SPEEDX, 3);
			spritesetvalue(addmonster, S_SPEEDY, 0);
			putsprite(addmonster, 1, 18);
			spritesetvalue(addmonster, S_LIVES, monsterlives);
			nextstep[addmonster] = 0;
			addmonster--;
			monstercount++;
		}
		settimer(1,800);
	}
	for(i = 0; i < 56; i++){
		tower = istower(i);
		if(tower){
			col = ((tower - 1) / 2) * 2 + random(1);
			setcolor(colors[col]);
			char jx = (i % 8) * 16 + 8;
			char jy = (i / 8) * 16 + 4;
			if(tower == 1 || tower == 5){
				d = getnearest(jx, jy, 30);
				s = 1;
			}
			else if(tower == 2 || tower == 6){
				d = getnearest(jx, jy, 40);
				s = 2;
			}
			else if(tower == 3){
				d = getnearest(jx, jy, 20);
				s = 3;
			}
			else if(tower == 4){
				d = getnearest(jx, jy, 30);
				s = 4;
			}
			if(d > 0 && random(15) == 1){
				line(jx, jy, spritegetvalue(d, S_X) + 5, spritegetvalue(d, S_Y) + 6);
				if(tower < 5){
					l = spritegetvalue(d, S_LIVES) - s;
					spritesetvalue(d, S_LIVES, l);
					if(l <= 0){
						monstercount--;
						gold += 1;
					}
				}
				else{
					if(nextstep[d] == 0 || nextstep[d] == 4)
						spritesetvalue(d, S_X, spritegetvalue(d, S_X) - s*2);
					else if(nextstep[d] == 2)
						spritesetvalue(d, S_X, spritegetvalue(d, S_X) + s*2);
					else
						spritesetvalue(d, S_Y, spritegetvalue(d, S_Y) - s*2);
				}
			}
		}
	}
	for(i = 1; i <= maxmonster; i++)
		if(spritegetvalue(i, S_LIVES)){
			if(nextstep[i] == 0 && spritegetvalue(i, S_X) >= point[0]){
				spritesetvalue(i, S_SPEEDX, 0);
				spritesetvalue(i, S_SPEEDY, 3);
				nextstep[i]+=1;
			}
			else if(nextstep[i] == 1 && spritegetvalue(i, S_Y) >= point[1]){
				spritesetvalue(i, S_SPEEDX, -3);
				spritesetvalue(i, S_SPEEDY, 0);
				nextstep[i]+=1;
			}
			else if(nextstep[i] == 2 && spritegetvalue(i, S_X) <= point[2]){
				spritesetvalue(i, S_SPEEDX, 0);
				spritesetvalue(i, S_SPEEDY, 3);
				nextstep[i]+=1;
			}
			else if(nextstep[i] == 3 && spritegetvalue(i, S_Y) >= point[3]){
				spritesetvalue(i, S_SPEEDX, 3);
				spritesetvalue(i, S_SPEEDY, 0);
				nextstep[i]+=1;
			}
			else if(nextstep[i] == 4 && spritegetvalue(i, S_X) >= point[4]){
				spritesetvalue(i, S_SPEEDX, 0);
				spritesetvalue(i, S_SPEEDY, 3);
				nextstep[i]+=1;
			}
			else if(nextstep[i] == 5 && spritegetvalue(i, S_Y) >= 102){
				spritesetvalue(i, S_LIVES, 0);
				lives--;
				monstercount--;
			}
		}
}

char updatetower(){
	pos = x + y * 8;
	if(gold >= 50){
		if(field[pos] == t11)
			field[pos] = t12;
		else if(field[pos] == t21)
			field[pos] = t22;
		else if(field[pos] == t31)
			field[pos] = t32;
		gold -= 50;
	}
}

void newtower(){
	pos = x + y * 8;
	if(field[pos] == gr){
		if(mpos == 0 && gold >= 20){
			field[pos] = t11;
			gold -= 20;
		}
		else if(mpos == 1 && gold >= 30){
			field[pos] = t21;
			gold -= 30;
		}
		else if(mpos == 2 && gold >= 30){
			field[pos] = t31;
			gold -= 30;
		}
	}
	drawtile(0,0);	
}

void drawmenu(){
	setcolor(1);
	if(gold >= 20)
		putimage(menuon[0], 1, 120, 7, 7);
	else
		putimage(menuoff[0], 1, 120, 7, 7);
	gotoxy(2,15);
	putn(20);
	if(gold >= 30)
		putimage(menuon[1], 26, 120, 7, 7);
	else
		putimage(menuoff[1], 26, 120, 7, 7);
	gotoxy(6,15);
	putn(30);
	if(gold >= 30)
		putimage(menuon[2], 51, 120, 7, 7);
	else
		putimage(menuoff[2], 51, 120, 7, 7);
	gotoxy(10,15);
	putn(30);
	gotoxy(13,15);
	printf("%dG ", gold);
	gotoxy(13,14);
	printf("%d%c ", lives,3);
}

void action(){
	key = getkey();
	if(key != prevkey){
		if(key == KEY_LEFT){
			if(x > 0)
				x--;
		}
		else if(key == KEY_RIGHT){
			if(x < 7)
				x++;
		}
		if(key == KEY_UP){
			if(y > 0)
				y--;
		}
		else if(key == KEY_DOWN){
			if(y < 6)
				y++;
		}
		else if(key == KEY_A){
			if(istower(x + y * 8) & 1){
				updatetower();
			}
			else{
				newtower();
			}
		}
		else if(key == KEY_B){
			putimage(scursor, 5 + mpos * 25, 113, 7, 4);
			mpos++;
			if(mpos >= 3)
				mpos = 0;
			putimage(mcursor, 5 + mpos * 25, 113, 7, 4);
		}
		if(istower(x + y * 8) & 1)
			getsprite(0, cursorup);
		else if(istower(x + y * 8))
			getsprite(0, cursoroff);
		else
			getsprite(0, cursor);
		putsprite(0, x * 16, y * 16);
	}
	prevkey = key;
}

void main(){
	init();
	while(1){
		nextcadr();
		step();
		action();
		drawmenu();
		if(monstercount <= 0 && addmonster <= 0)
			newwave();
		if(lives <= 0)
			loose();
		delayredraw();
	}
}	