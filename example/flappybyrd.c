//16x12
char bird[] = {0x0,0x0,0x0,0xbb,0xbb,0xb0,0x0,0x0,0x0,0x0,0xbb,0x11,0xb1,0x1b,0x0,0x0,0x0,0xb,0x11,0x7b,0x11,0x11,0xb0,0x0,0xb,0xbb,0x77,0x7b,0x11,0x14,0x1b,0x0,0xb1,0x11,0xb7,0x7b,0x11,0x14,0x1b,0x0,0xb1,0x11,0x1b,0x77,0xb1,0x11,0x1b,0x0,0xb7,0x11,0x7b,0x77,0x7b,0xbb,0xbb,0xb0,0xb,0x77,0xb7,0x77,0xb2,0x22,0x22,0x2b,0x0,0xbb,0xaa,0xab,0x2b,0xbb,0xbb,0xb0,0x0,0xba,0xaa,0xaa,0xb2,0x22,0x22,0xb0,0x0,0xb,0xba,0xaa,0xab,0xbb,0xbb,0x0,0x0,0x0,0xb,0xbb,0xb0,0x0,0x0,0x0};
//8x32
char tube[] = {0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71,0x95,0xdd,0xdd,0x71};
//16x16 rle
char fone[] = {0xb,0x33,0x82,0x11,0x6,0x33,0x3,0x11,0x4,0x33,0x4,0x11,0x85,0x13,0x11,0x33,0x31,0x6,0x11,0x84,0x13,0x11,0x1f,0x3,0xff,0x4,0x11,0x82,0x1f,0x2,0x11,0x82,0x1f,0x4,0x11,0x4,0x1f,0x4,0x11,0x82,0x1f,0x2,0x11,0x83,0x1f,0xff,0x2,0x11,0x85,0x1f,0xff,0x1f,0x99,0x2,0x1f,0x2,0x11,0x2,0x1f,0x85,0x19,0xdd,0x9f,0x1f,0x2,0x11,0x92,0x1f,0x19,0x9d,0xdd,0xd9,0x19,0x99,0x11,0x1f,0x9d,0xdd,0x9d,0xd9,0x9d,0xdd,0x91,0x99,0x3,0xdd,0x82,0x9d,0x2,0xdd,0x82,0xd9,0x6,0xdd,0x82,0x9d,0x9,0xdd};
char fone2[] = {0x8,0x99,0x8a,0x55,0x5d,0xdd,0xd5,0x55,0x5d,0xdd,0xd5,0x55,0x2,0xdd,0x2,0x55,0x2,0xdd,0x8a,0x55,0x5d,0xdd,0xd5,0x55,0x5d,0xdd,0xd5,0x55,0x2,0xdd,0x2,0x55,0x2,0xdd,0x2,0x55,0x8,0xbb,0x8,0xcc,0x48,0x77};

char game,score,i,h;

void init();

void onexit(){
	if(spritegetvalue(1, S_Y) > 127)
		game = 0;
	else
		spritesetvalue(1, S_Y, 1);;
}

void tubeOnexit(int n){
	if(spritegetvalue(n, S_X) < 0){
		spritesetvalue(n, S_X, 127);
		if(spritegetvalue(n, S_Y) < 64)
			spritesetvalue(n, S_HEIGHT, 8 + random(24));
		else{
			h = 8 + random(24);
			spritesetvalue(n, S_HEIGHT, h);
			spritesetvalue(n, S_Y, 112 - h);
			score++;
			gotoxy(10,7);
			putn(score);
		}
	}
}

void oncollision(){
	game = 0;
}

void init(){
	game = 1;
	score = 0;
	setbgcolor(3);
	clearscreen();
	getsprite(1, bird);
	spritesetvalue(1, S_WIDTH, 16);
	spritesetvalue(1, S_HEIGHT, 12);
	spritesetvalue(1, S_SOLID, 1);
	spritesetvalue(1, S_GRAVITY, 3);
	spritesetvalue(1, S_SPEEDY, -1);
	spritesetvalue(1, S_SPEEDX, 0);
	spritesetvalue(1, S_ON_EXIT_SCREEN, onexit);
	spritesetvalue(1, S_ON_COLLISION, oncollision);
	putsprite(1, 5, 60);
	for(i = 0; i < 16; i++){
		putimagerle(fone2, i * 16, 112, 16, 16);
		putimagerle(fone, i * 16, 96, 16, 16);
	}
	for(i = 2; i < 4; i++){
		getsprite(i, tube);
		spritesetvalue(i, S_WIDTH, 8);
		spritesetvalue(i, S_HEIGHT, 32);
		spritesetvalue(i, S_SPEEDX, -6);
		spritesetvalue(i, S_SPEEDY, 0);
		spritesetvalue(i, S_SOLID, 1);
		spritesetvalue(i, S_ON_EXIT_SCREEN, tubeOnexit);
	}
	putsprite(2, 128,0);
	spritesetvalue(2, S_HEIGHT, 8 + random(24));
	putsprite(3, 128, 80);
}

void main(){
while(1){
	init();
	while(game){
		spritesetvalue(1, S_ANGLE, spritegetvalue(1, S_SPEEDY));
		if(getkey())
			spritesetvalue(1, S_SPEEDY, -20);
		delayredraw();
	}
	for(i = 0; i < 20; i++)
		delayredraw();
	while(getkey() == 0){}
}
}